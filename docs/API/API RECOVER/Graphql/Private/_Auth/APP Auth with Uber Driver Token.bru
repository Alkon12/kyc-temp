meta {
  name: APP Auth with Uber Driver Token
  type: graphql
  seq: 2
}

post {
  url: {{host}}/api/public/graphql
  body: graphql
  auth: bearer
}

auth:bearer {
  token: {{accessToken}}
}

body:graphql {
  query AuthWithUberDriver($token: String!) {
    authWithUberDriver(token: $token) {
      accessToken
    }
  }
}

body:graphql:vars {
  {
      "token":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjE1MTYyMzkwMjIsImVtYWlsIjoicmJ1dHRhQGdydXBvYXV0b2Zpbi5jb20ifQ.srSeUkpOjduGoOx--rGEp48qnDlxyAfa6PIj4-NrB4MvMO516I5HVjfvp27SIdsiUCauxv8DHp8BD_njLxxs8wnKSVcAvI2P3vgsbwl1ZCtp6qrpLPhFv29CarHeZzrKtztkdzuDuMdob3h9MXaEhAt9EWVZRPsGvV3Vb7m0JbIojCz8VLDUeDGR3OtTQn9ZdEaNG3EGqGUcNqIWhIUIGmRf55EtObdEr2giRSC8O7jckXVZik5k_NCUGOZWBrUgZtykA_PdmyUSM2zrOhZwN416CSFg8HdyzOdMk54zNWqufJpWrIRUC8AGFQQdcb_g9GjmDeW-RaT5r-8MfueuCA"
  }
}

tests {
  var jsonData = res.getBody();
  
  
  bru.setEnvVar("accessToken", jsonData.data.authWithUberDriver.accessToken);
  
  
  
}
